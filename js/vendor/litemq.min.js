var LiteMQ={attach:function(t,e,n){this._addEventListener(t,[e,n])},detach:function(t,e,n){t?n?this.detachListener(t,e,n):this.detachEvent(t,e):this.detachAll(e)},detachAll:function(t){var e=this._getListeners();for(var n in e)this.detachEvent(n,t)},detachEvent:function(t,e){var n=[];this._eachEventListener(t,function(t,i){e!==t&&n.push([t,i])}),this._setEventListeners(t,n)},detachListener:function(t,e,n){var i=[];this._eachEventListener(t,function(t,s){(e!==t||n!==s)&&i.push([t,s])}),this._setEventListeners(t,i)},trigger:function(t,e,n){this._eachEventListener(t,function(t,i){t!==e&&i.call(t,n)})},_listeners:[],_addEventListener:function(t,e){var n=this._getEventListeners(t);n.push(e)},_eachEventListener:function(t,e){for(var n,i=this._getEventListeners(t),s=0;i.length>s;s++)n=i[s],e(n[0],n[1])},_getEventListeners:function(t){var e=this._listeners[t]||[];return this._setEventListeners(t,e),this._listeners[t]},_getListeners:function(){return this._listeners},_setEventListeners:function(t,e){this._listeners[t]=e}};LiteMQ.Client=o.Class({init:function(t){this.name="anonymous",this._super(t)},pub:function(t,e){var n={};"object"==typeof e&&(e=JSON.parse(JSON.stringify(e))),n.origin=this.name,n.body=e,LiteMQ.trigger(t,this,n)},sub:function(t,e){LiteMQ.attach(t,this,e)},unsub:function(t,e){LiteMQ.detach(t,this,e)}});