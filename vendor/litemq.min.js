var LiteMQ={attach:function(t,e,n){this._addEventListener(t,[e,n])},detach:function(t,e,n){t?n?this._detachListener(t,e,n):this._detachEvent(t,e):this._detachAll(e)},trigger:function(t,e,n){this._filterEventListener(t,function(t,i){try{return t!==e&&i.call(t,n),!0}catch(s){console.log(s)}})},_listeners:{},_addEventListener:function(t,e){var n=this._getEventListeners(t);n.push(e)},_detachAll:function(t){var e=this._getListeners();for(var n in e)this._detachEvent(n,t)},_detachEvent:function(t,e){this._filterEventListener(t,function(t){return e!==t?!0:void 0})},_detachListener:function(t,e,n){this._filterEventListener(t,function(t,i){return e!==t||n!==i?!0:void 0})},_filterEventListener:function(t,e){for(var n,i=this._getEventListeners(t),s=[],r=0;i.length>r;r++)n=i[r],e(n[0],n[1])&&s.push([n[0],n[1]]);this._setEventListeners(t,s)},_getEventListeners:function(t){var e=this._listeners[t]||[];return this._setEventListeners(t,e),this._listeners[t]},_getListeners:function(){return this._listeners},_setEventListeners:function(t,e){this._listeners[t]=e}};LiteMQ.Client=o.Class({init:function(t){this.name="anonymous",this._super(t)},pub:function(t,e){var n={};"object"==typeof e&&(e=JSON.parse(JSON.stringify(e))),n.origin=this.name,n.body=e,LiteMQ.trigger(t,this,n)},sub:function(t,e){LiteMQ.attach(t,this,e)},unsub:function(t,e){LiteMQ.detach(t,this,e)}});